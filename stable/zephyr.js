PIXI=function(e){"use strict";let t=e.utils;var n,i,r,s=((n=s||{}).VERSION="23.5.11",n._audio={},n._audio.buffers=new Map,n._audio.ctx=new AudioContext,n._audio.buffer=function(e){let t=function(e){e.autoplay&&e.start(),"function"==typeof e.onload&&e.onload()};if(n._audio.buffers.get(e.src))t(e);else{n._audio.buffers.set(e.src,!1);let i=new XMLHttpRequest;i.open("GET",e.src,!0),i.responseType="arraybuffer",i.onload=function(){n._audio.ctx.decodeAudioData(i.response,function(i){n._audio.buffers.set(e.src,i),t(e)})},i.send()}},n.SpriteFix={rect:function(e){e.scale||(e.scale={x:1,y:1});let t=e.width*(e.scale.x<0?-1:1),n=e.height*(e.scale.y<0?-1:1);return{x:e.x-(e.anchor?e.anchor.x*t:0)+Math.min(0,t),y:e.y-(e.anchor?e.anchor.y*n:0)+Math.min(0,n),width:Math.abs(t),height:Math.abs(n)}},circ:function(e){return e.scale||(e.scale={x:1,y:1}),{x:(.5-e.anchor.x)*e.width*(e.scale.x<0?-1:1)+e.x,y:(.5-e.anchor.y)*e.height*(e.scale.y<0?-1:1)+e.y,r:(e.width+e.height)*.25}}},n.useAudio=()=>{console.error("ZephyrJS: useAudio() is deprecated")},n.useFile=()=>{console.error("ZephyrJS: useFile() is deprecated")},n.useKeys=()=>{console.error("ZephyrJS: useKeys() is deprecated")},n.useMouse=()=>{console.error("ZephyrJS: useMouse() is deprecated")},n.useParticles=()=>{console.error("ZephyrJS: useParticles() is deprecated")},n),o=((i=o||{}).rectangle=function(e,t){let n=PIXI.Zephyr.SpriteFix.rect(e),i=PIXI.Zephyr.SpriteFix.rect(t);return!(n.x+e.width<i.x||n.y+e.height<i.y||n.x>i.x+t.width||n.y>i.y+t.height)},i.circle=function(e,t){let n=PIXI.Zephyr.SpriteFix.circ(e),i=PIXI.Zephyr.SpriteFix.circ(t);return Math.hypot(i.x-n.x,i.y-n.y)<=n.r+i.r},i);let a,c;var u,l,d,h,p,f=(r=f||{},a=s._audio.ctx,c=s._audio.buffers,r._starter=function(){c.has(this.src)?c.get(this.src)?(r._stopper(),this._source=a.createBufferSource(),this._source.buffer=c.get(this.src),this._gainNode.gain.value=this.gain,this._source.loop=this.loop,this._panNode.pan.value=this.pan,this._source.playbackRate.value=this.speed,this._source.connect(this._gainNode).connect(this._panNode).connect(a.destination),this._source.start(0)):console.warn("ZephyrJS DirectAudio: "+this.src+" decoding is in progress."):(s._audio.buffer(this.src),console.warn("ZephyrJS DirectAudio: "+this.src+" has not been buffered, starting now."))},r._stopper=function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._source=null)},r.from=function(e,t){let n={_source:null,_gainNode:a.createGain(),_panNode:a.createStereoPanner(),autoplay:!1,gain:1,loop:!1,onload:t,pan:0,speed:1,src:null,start:r._starter,stop:r._stopper};switch(typeof e){case"string":n.src=e,s._audio.buffer(n);break;case"object":n={...n,...e},s._audio.buffer(n)}return n},r),$=((u=$||{}).write=function(e,t){if("string"==typeof e){let n=document.createElement("a");n.href="data:text/plain;charset=utf-8,"+encodeURIComponent(e),n.download="string"==typeof t?t:document.title+".txt",n.click(),n.remove()}else console.error("PIXI.File: Content to be written into "+t+" is not a string.\nTry JSON.stringify(obj)?")},u.open=function(e,t){let n={fulfilled:!1,onload:t,result:null,type:"*"};switch(typeof e){case"string":n.type=e;break;case"object":n={...n,...e}}let i=document.createElement("input");return i.type="file",i.accept=n.type,i.addEventListener("change",function(){let e=new FileReader;e.readAsText(i.files[0]),e.onload=function(){n.fulfilled=!0,n.result=e.result,"function"==typeof n.onload&&n.onload()}}),i.click(),i.remove(),n},u),y=((l=y||{})._map=new Map,l.down=function(e){return!!(l._map.size>0&&l._map.has(e))&&(l._map.set(e,!1),!0)},l.fired=function(e){return!!(l._map.size>0&&l._map.get(e))&&(l._map.set(e,!1),!0)},l),m=((d=m||{})._bounds=document.getElementsByTagName("html")[0].getBoundingClientRect(),d._container=document.getElementsByTagName("html")[0],d.x=0,d.y=0,d.anchor={x:0,y:0},d.width=1,d.height=1,d.setContainer=function(e){let t=e.getBoundingClientRect();t.width*t.height==0?console.error("Cannot use PIXI.Mouse.setContainer() with an invalid element."):(m._container=e,m._bounds=m._container.getBoundingClientRect())},d._btns=["Primary","Middle","Secondary"],d._map=new Map,d.down=function(e){return!!(PIXI.Mouse._map.size>0&&PIXI.Mouse._map.has(e))&&(PIXI.Mouse._map.set(e,!1),!0)},d.fired=function(e){return!!(PIXI.Mouse._map.size>0&&PIXI.Mouse._map.get(e))&&(PIXI.Mouse._map.set(e,!1),!0)},d),g=((h=g||{})._init=function(e){let t=(Math.random()-.5)*this.spread+this.direction;e.move={x:this.distance/(.001*this.life)*Math.cos(t),y:this.distance/(.001*this.life)*Math.sin(t)},e.x=this.spawn.x,e.y=this.spawn.y,e.life=this.life,e.scale.x=e.scale.y=this.scaling,this.rotate&&(e.rotation=t+.5*Math.PI)},h._step=function(e){let t=this.life/this.maxCount;if(this.children.forEach(t=>{(t.life-=e)<0?this.removeChild(t):(t.x+=t.move.x*e*.001,t.y+=t.move.y*e*.001)}),this.children.length<this.maxCount&&this.fresh)for(this._spawnTimer-=e;this._spawnTimer<0;){let n=new PIXI.Sprite(this.baseTexture);n.anchor={x:.5,y:.5},this._init(n),this.addChild(n),this._spawnTimer+=t}},h.from=function(e,t){let n={_init:h._init,_spawnTimer:0,direction:0,distance:256,life:1e3,maxCount:512,rotate:!1,scaling:1,spawn:{x:0,y:0},spread:.5*Math.PI,step:h._step},i;switch(typeof e){case"string":for(let r in i=new PIXI.ParticleContainer(t),n)i[r]=n[r];i.baseTexture=PIXI.Texture.from(e),i.maxCount=t,i.src=e;break;case"object":for(let s in i=new PIXI.ParticleContainer(e.maxCount),n)i[s]=n[s];for(let o in e)i[o]=e[o];i.baseTexture=PIXI.Texture.from(e.src)}return i},h);let x,b;var w,_=(p=_||{},x=s._audio.ctx,b=s._audio.buffers,p._starter=function(){b.has(this.src)?b.get(this.src)?(p._stopper(),this._source=x.createBufferSource(),this._source.buffer=b.get(this.src),this._gainNode.gain.value=this.gain,this._panNode.pan.value=this.pan,this._source.connect(this._gainNode).connect(this._panNode).connect(x.destination),this._source.start(0)):console.warn("ZephyrJS SpatialAudio: "+this.src+" decoding is in progress."):(s._audio.buffer(this.src),console.warn("ZephyrJS SpatialAudio: "+this.src+" has not been buffered, starting now."))},p._stopper=function(){this._source&&(this._source.stop(0),this._source.disconnect(),this._source=null)},p.from=function(e){return console.warning("Creating SpatialAudio of "+e+". Please not this is VERY unstable currently"),s._audio.buffer(e),{_source:null,_gainNode:x.createGain(),maxDistance:1e4,position:{x:0,y:0},listener:{x:0,y:0,angle:0},start:p._starter,stop:p._stopper,src:e}},p);return t=((w=t||{}).clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},w.mix=function(e,t,n){return e*(1-n)+t*n},w.random=function e(t,n){return Math.random()*(n-t+1)^0+t},w.toggleFullScreen=function(e){e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement?e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},w),window.addEventListener("contextmenu",e=>{e.preventDefault()}),window.addEventListener("keydown",e=>{y._map.set(e.code,!0)}),window.addEventListener("keyup",e=>{y._map.delete(e.code)}),window.addEventListener("resize",()=>{m._bounds=m._container.getBoundingClientRect()}),window.addEventListener("mouseup",e=>{m._map.delete(m._btns[e.button])}),window.addEventListener("mousedown",e=>{m._map.set(m._btns[e.button],!0)}),window.addEventListener("mousemove",e=>{m.x=(e.x-m._bounds.left+window.pageXOffset)/m._bounds.width*m._container.width,m.y=(e.y-m._bounds.top+window.pageYOffset)/m._bounds.height*m._container.height}),e.Zephyr=s,e.collision=o,e.DirectAudio=f,e.File=$,e.Keys=y,e.Mouse=m,e.Particles=g,e.SpatialAudio=_,e.utils=t,e}(PIXI||{});