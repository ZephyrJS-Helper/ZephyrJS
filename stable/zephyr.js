"use strict";PIXI.Zephyr={version:"ZephyrJS 23.4.13",compatible:"PixiJS v7.2.4",_spriteFix(e){let t=e.width*(e.scale?e.scale.x:1),s=e.height*(e.scale?e.scale.y:1);return{x:e.x-(e.anchor?e.anchor.x*t:0)+Math.min(0,t),y:e.y-(e.anchor?e.anchor.y*s:0)+Math.min(0,s),width:Math.abs(t),height:Math.abs(s)}},useKeys(){PIXI.Keys={_map:new Map,down:e=>!!(PIXI.Keys._map.size>0&&PIXI.Keys._map.has(e))&&(PIXI.Keys._map.set(e,!1),!0),fired:e=>!!(PIXI.Keys._map.size>0&&PIXI.Keys._map.get(e))&&(PIXI.Keys._map.set(e,!1),!0)},window.addEventListener("keydown",e=>{PIXI.Keys._map.set(e.code,!0)}),window.addEventListener("keyup",e=>{PIXI.Keys._map.delete(e.code)})},useMouse(){PIXI.Mouse={_bounds:document.getElementsByTagName("html")[0].getBoundingClientRect(),_container:document.getElementsByTagName("html")[0],x:0,y:0,anchor:{x:0,y:0},width:1,height:1,setContainer(e){let t=e.getBoundingClientRect();t.width*t.height==0?console.error("Cannot use PIXI.Mouse.setContainer() with an invalid element."):(PIXI.Mouse._container=e,PIXI.Mouse._bounds=PIXI.Mouse._container.getBoundingClientRect())},_ALIAS:["Primary","Middle","Secondary"],_map:new Map,down:e=>!!(PIXI.Mouse._map.size>0&&PIXI.Mouse._map.has(e))&&(PIXI.Mouse._map.set(e,!1),!0),fired:e=>!!(PIXI.Mouse._map.size>0&&PIXI.Mouse._map.get(e))&&(PIXI.Mouse._map.set(e,!1),!0)},window.onresize=()=>{PIXI.Mouse._bounds=PIXI.Mouse._container.getBoundingClientRect()},window.addEventListener("mouseup",e=>{PIXI.Mouse._map.delete(PIXI.Mouse._ALIAS[e.button])}),window.addEventListener("mousedown",e=>{PIXI.Mouse._map.set(PIXI.Mouse._ALIAS[e.button],!0)}),window.addEventListener("mousemove",e=>{PIXI.Mouse.x=(e.x-PIXI.Mouse._bounds.left+window.pageXOffset)/PIXI.Mouse._bounds.width*PIXI.Mouse._container.width,PIXI.Mouse.y=(e.y-PIXI.Mouse._bounds.top+window.pageYOffset)/PIXI.Mouse._bounds.height*PIXI.Mouse._container.height})},useAudio(){PIXI.Audio={_ctx:new AudioContext,_buffers:new Map,_player:function(){if(PIXI.Audio._buffers.has(this.src)){let e=PIXI.Audio._ctx.createBufferSource();e.buffer=PIXI.Audio._buffers.get(this.src),this._gainNode.gain.value=this.volume,e.connect(this._gainNode).connect(PIXI.Audio._ctx.destination),e.start(0)}},from(e){let t=new XMLHttpRequest;return t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=()=>{PIXI.Audio._ctx.decodeAudioData(t.response,function(t){PIXI.Audio._buffers.set(e,t)})},t.send(),{_gainNode:PIXI.Audio._ctx.createGain(),src:e,volume:1,play:PIXI.Audio._player}}}},useFile(){PIXI.File={async write(e,t){let s=new Blob([JSON.stringify(e)],{type:JSON});var i=document.createElement("a"),n=URL.createObjectURL(s);i.href=n,i.download=t+".json",document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),window.URL.revokeObjectURL(n)},0)},open:async()=>([fileHandle]=await window.showOpenFilePicker(),JSON.parse(await (await fileHandle.getFile()).text()))}},useParticles(){PIXI.Particles={_step:function(e){let t=e=>{let t=(Math.random()-.5)*this.spread+this.direction;e.alpha=1,e.move={x:this.speed*Math.cos(t),y:this.speed*Math.sin(t)},e.x=this.spawn.x,e.y=this.spawn.y,e.life=this.life,e.scale.x=e.scale.y=this.scaling,this.rotate&&(e.rotation=t+.5*Math.PI)};if(this.children.forEach(s=>{(s.life-=e*this.speed)<=0?this.fresh?t(s):this.removeChild(s):(s.x+=s.move.x*e,s.y+=s.move.y*e)}),this.children.length<this.maxCount&&this.fresh&&(this._spawnTimer-=e,this._spawnTimer<=0)){this._spawnTimer=this.life/this.maxCount;let s=new PIXI.Sprite(this.baseTexture);s.anchor={x:.5,y:.5},t(s),this.addChild(s)}},from(e,t,s){s||(s={});let i=new PIXI.ParticleContainer(t);return i._spawnTimer=0,i.baseTexture=PIXI.Texture.from(e),i.direction=s.direction?s.direction:0,i.life=s.life?s.life:128,i.maxCount=t,i.rotate=!!s.rotate&&s.rotate,i.scaling=s.scaling?s.scaling:1,i.spawn={x:0,y:0},i.speed=s.speed?s.speed:1,i.spread=s.spread?s.spread:0,i.step=PIXI.Particles._step,i}}}},PIXI.collision={aabb(e,t){let s=PIXI.Zephyr._spriteFix(e),i=PIXI.Zephyr._spriteFix(t);return!(s.x+e.width<i.x||s.y+e.height<i.y||s.x>i.x+t.width||s.y>i.y+t.height)},radius:(e,t)=>Math.hypot(e.x-t.x+(e.width-t.width)*.5,e.y-t.y+(e.height-t.height)*.5)<=(Math.max(e.width,e.height)+Math.max(t.width,t.height))*.5},PIXI.clamp=(e,t,s)=>Math.min(Math.max(e,t),s),PIXI.mix=(e,t,s)=>e*(1-s)+t*s,PIXI.rand=(e,t)=>Math.random()*(t-e+1)^0+e,PIXI.toggleFullScreen=e=>{e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement?e.cancelFullScreen?e.cancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},window.addEventListener("contextmenu",e=>{e.preventDefault()}),console.log("%cUsing "+PIXI.Zephyr.version+"! https://github.com/OttCS/ZephyrJS","color:#ef6f6c"),console.log("%cCompatible with "+PIXI.Zephyr.compatible,"color:#ea1e63");